/*!
 * jQuery Height Equalizer Plugin
 *
 * Copyright 2014 Hideki Abe <hideki.abe@anothersky.pw>
 * Released under the MIT license
 *
 * Version: 1.0.0
 * Date: 2014-04-18
 */
!function(a,b){"use strict";function c(b,c){this.$parent=a(b),this.$window=null,this.$body=null,this.$target=null,this.fontSize=null,this.options=a.extend({},e,c),this._defaults=e,this._name=d,this.init()}var d="heightEqualizer",e={collect:function(a){return a.children()},groupBy:null,checkFontResize:!0};c.prototype={_getElemHeight:function(a){return"border-box"===a.css("boxSizing")?a.outerHeight():a.height()},_getArrangeHeight:function(a,b){var c,d=this.options.groupBy,e=0;if(d&&d>0&&b>d)for(;b>e;)e%d===0&&(c=Math.max.apply(Math,a.slice(e,e+d))),a[e]=c,e+=1;else for(c=Math.max.apply(Math,a);b>e;)a[e]=c,e+=1;return a},_setHeight:function(a,b){for(var c=0;b>c;)a.length>0?this.$target.eq(c).css("height",a[c]+"px"):this.$target.eq(c).css("height",""),c+=1},doEqualize:function(){var a=[],b=this.$target.length,c=0;for(this._setHeight([],b);b>c;)a.push(this._getElemHeight(this.$target.eq(c))),c+=1;a=this._getArrangeHeight(a,b),this._setHeight(a,b)},checkFontSize:function(){var a=this.$body.css("fontSize");this.fontSize!==a&&(this.fontSize=a,this.$window.trigger("fontresize"))},init:function(){this.$window=a(b),this.$target=this.options.collect.call(this,this.$parent),this.$window.on("load resize fontresize",a.proxy(this.doEqualize,this)),this.options.checkFontResize&&(this.$body=a("body"),this.fontSize=this.$body.css("fontSize"),b.setInterval(a.proxy(this.checkFontSize,this),200))}},a.fn[d]=function(b){return this.each(function(){a.data(this,"plugin_"+d)||a.data(this,"plugin_"+d,new c(this,b))})}}(jQuery,window,document);